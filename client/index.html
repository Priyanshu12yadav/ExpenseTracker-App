<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Expense Tracker — Login</title>

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
                    colors: { brand: { 500: '#7c3aed', 600: '#6d28d9', 700: '#5b21b6' } }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 min-h-screen text-cyan-200">
    <div class="max-w-6xl mx-auto px-6 py-10">
        <header class="flex items-center justify-between">
            <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">
                <span class="text-brand-500">Sub</span>Trackr
            </h1>
            
        </header>

        <main class="grid md:grid-cols-2 gap-8 mt-10">
            <!-- Preview / Marketing side -->
            <section class="hidden md:block">
                <div class="rounded-2xl p-6 bg-slate-900/60 border border-white/10 shadow-2xl backdrop-blur neon-card">
                    <p class="text-cyan-200/80 leading-relaxed">
                        Track your expenses with a clean, modern dashboard. Visualize spending by category,
                        view monthly trends, and set budgets. Log in to get started.
                    </p>

                    <!-- Fake preview panel -->
                    <div class="mt-6 rounded-xl bg-slate-950/60 border border-white/10 p-4">
                        <div class="flex gap-3">
                            <div class="h-20 flex-1 rounded-lg bg-slate-900/70 border border-white/5"></div>
                            <div class="h-20 w-28 rounded-lg bg-slate-900/70 border border-white/5"></div>
                        </div>
                        <div class="h-40 mt-4 rounded-lg bg-slate-900/70 border border-white/5"></div>
                    </div>
                </div>
            </section>

            <!-- Auth card -->
            <section class="self-center">
                <div class="rounded-2xl bg-slate-900/70 border border-white/10 p-6 md:p-8 shadow-2xl backdrop-blur neon-card">
                    <div class="flex gap-2 mb-6">
                        <button id="tab-login" class="tab-btn active text-cyan-200">Log in</button>
                        <button id="tab-signup" class="tab-btn text-cyan-200">Sign up</button>
                    </div>

                    <!-- Login form -->
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label class="label text-cyan-700">Email</label>
                            <input id="login-email" type="email" class="input text-cyan-200" placeholder="you@example.com" required />
                        </div>
                        <div>
                            <label class="label text-cyan-700">Password</label>
                            <input id="login-password" type="password" class="input text-cyan-200" placeholder="••••••••" minlength="6" required />
                        </div>
                        <button class="btn-primary w-full text-cyan-700">Log in</button>
                        <p id="login-error" class="text-rose-400 text-sm mt-2 hidden"></p>
                    </form>

                    <!-- Signup form -->
                    <form id="signup-form" class="space-y-4 hidden">
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="label text-cyan-600">First name</label>
                                <input id="su-first" type="text" class="input text-cyan-200" required />
                            </div>
                            <div>
                                <label class="label text-black-600">Last name</label>
                                <input id="su-last" type="text" class="input text-cyan-200" required />
                            </div>
                        </div>
                        <div>
                            <label class="label text-black-600">Email</label>
                            <input id="su-email" type="email" class="input text-cyan-200" required />
                        </div>
                        <div>
                            <label class="label text-cyan-600">Password</label>
                            <input id="su-password" type="password" class="input text-cyan-200" minlength="6" required />
                            <p class="text-xs text-cyan-200/70 mt-1">At least 6 characters (stored hashed on this device).</p>
                        </div>
                        <button class="btn-primary w-full text-cyan-200">Create account</button>
                        <p id="signup-error" class="text-rose-400 text-sm mt-2 hidden"></p>
                        <p id="signup-ok" class="text-emerald-400 text-sm mt-2 hidden">Account created. You can log in now.</p>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
<script>
  // Tab toggle (same as before)
  const tabLogin = document.getElementById('tab-login');
  const tabSignup = document.getElementById('tab-signup');
  const loginForm = document.getElementById('login-form');
  const signupForm = document.getElementById('signup-form');

  const activate = (which) => {
    if (which === 'login') {
      tabLogin.classList.add('active'); tabSignup.classList.remove('active');
      loginForm.classList.remove('hidden'); signupForm.classList.add('hidden');
    } else {
      tabSignup.classList.add('active'); tabLogin.classList.remove('active');
      signupForm.classList.remove('hidden'); loginForm.classList.add('hidden');
    }
  };
  tabLogin.onclick = () => activate('login');
  tabSignup.onclick = () => activate('signup');

  // Handle signup
  signupForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('su-email').value.trim().toLowerCase();
    const password = document.getElementById('su-password').value;
    const first = document.getElementById('su-first').value.trim();
    const last = document.getElementById('su-last').value.trim();
    const errEl = document.getElementById('signup-error');
    const okEl = document.getElementById('signup-ok');

    const res = await fetch(`${API_URL}/users/register`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ first, last, email, password }),
    });

    const data = await res.json();
    if (res.ok) {
      errEl.classList.add('hidden');
      okEl.classList.remove('hidden');
      e.target.reset();
      activate('login');
    } else {
      okEl.classList.add('hidden');
      errEl.textContent = data.message;
      errEl.classList.remove('hidden');
    }
  });

  // Handle login
  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('login-email').value.trim().toLowerCase();
    const password = document.getElementById('login-password').value;
    const errEl = document.getElementById('login-error');

    const res = await fetch(`${API_URL}/users/login`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password }),
    });

    const data = await res.json();
    if (res.ok) {
      errEl.classList.add('hidden');
      // Store token and user info, then redirect
      localStorage.setItem('authToken', data.token);
      localStorage.setItem('user', JSON.stringify(data.user));
      window.location.href = 'dashboard.html';
    } else {
      errEl.textContent = data.message;
      errEl.classList.remove('hidden');
    }
  });

  // If already logged in, go to dashboard
  if (getAuthToken()) {
    window.location.href = 'dashboard.html';
  }
</script>

    <!-- <script src="app.js"></script>
    <script>
        // Tab toggle
        const tabLogin = document.getElementById('tab-login');
        const tabSignup = document.getElementById('tab-signup');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');

        const activate = (which) => {
            if (which === 'login') {
                tabLogin.classList.add('active'); tabSignup.classList.remove('active');
                loginForm.classList.remove('hidden'); signupForm.classList.add('hidden');
            } else {
                tabSignup.classList.add('active'); tabLogin.classList.remove('active');
                signupForm.classList.remove('hidden'); loginForm.classList.add('hidden');
            }
        };
        tabLogin.onclick = () => activate('login');
        tabSignup.onclick = () => activate('signup');

        // Handle signup
        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('su-email').value.trim().toLowerCase();
            const pass = document.getElementById('su-password').value;
            const first = document.getElementById('su-first').value.trim();
            const last = document.getElementById('su-last').value.trim();

            const res = await registerUser({ email, password: pass, first, last });
            const err = document.getElementById('signup-error');
            const ok = document.getElementById('signup-ok');
            if (res.ok) {
                err.classList.add('hidden');
                ok.classList.remove('hidden');
                (e.target).reset();
                activate('login');
            } else {
                ok.classList.add('hidden');
                err.textContent = res.message;
                err.classList.remove('hidden');
            }
        });

        // Handle login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value.trim().toLowerCase();
            const pass = document.getElementById('login-password').value;

            const res = await loginUser({ email, password: pass });
            const err = document.getElementById('login-error');
            if (res.ok) {
                err.classList.add('hidden');
                window.location.href = 'dashboard.html';
            } else {
                err.textContent = res.message;
                err.classList.remove('hidden');
            }
        });

        // If already logged in, go to dashboard
        if (getActiveUser()) {
            window.location.href = 'dashboard.html';
        }
    </script> -->
</body>
</html>


